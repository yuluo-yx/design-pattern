# 状态模式 （State Design Pattern）

状态模式是一种行为设计模式， 让你能在一个对象的内部状态变化时改变其行为， 使其看上去就像改变了自身所属的类一样。

> 其主要思想是程序在任意时刻仅可处于几种有限的状态中。
>
> 在任何一个特定状态中，程序的行为都不相同，且可瞬间从一个状态切换到另一个状态。
> 不过，根据当前状态，程序可能会切换到另外一种状态，也可能会保持当前状态不变。
> 这些数量有限且预先定义的状态切换规则被称为转移。

### 使用场景

1. 如果对象需要根据自身当前的状态做出不同行为，同时状态的数量非常多且与状态相关的代码频繁变更；
2. 如果某个类需要根据成员变量的当前值改变自身行为，从而需要使用大量的条件语句。

## 1. 应用

1. OA 系统审批流程；
2. 订单状态管理等。

### 1.1 优点

1. 单一职责原则。 将与特定状态相关的代码放在单独的类中；
2. 开闭原则。 无需修改已有状态类和上下文就能引入新状态；
3. 通过消除臃肿的状态机条件语句简化上下文代码。

### 1.2 缺点

1. 不要过度设计，当只有三个以下的状态时，不需要用。

## 2. Demo

OA 系统的请假审批流程一般为：编辑完成之后（草稿）发起 -> 主管审批 -> HRBP 审批 -> 结束 和撤销、拒绝 六种状态。以此为例演示状态设计模式的应用。
